import{p as s}from"./index-CFOnY0CO.js";var Ro={},rt={},ot={};function Ze(){return Ze=s.proxy.Object.assign||function(a){for(var d=1;d<arguments.length;d++){var f=arguments[d];for(var _ in f)s.proxy.Object.prototype.hasOwnProperty.call(f,_)&&(a[_]=f[_])}return a},Ze.apply(this,arguments)}function vo(i,a){if(i==null)return{};var d={},f=s.proxy.Object.keys(i),_,R;for(R=0;R<f.length;R++)_=f[R],!(a.indexOf(_)>=0)&&(d[_]=i[_]);return d}ot._extends=Ze;ot._object_without_properties_loose=vo;var v={},nt=Object.defineProperty,xo=Object.getOwnPropertyDescriptor,Io=Object.getOwnPropertyNames,$o=Object.prototype.hasOwnProperty,No=(i,a)=>{for(var d in a)nt(i,d,{get:a[d],enumerable:!0})},Oo=(i,a,d,f)=>{if(a&&typeof a=="object"||typeof a=="function")for(let _ of Io(a))!$o.call(i,_)&&_!==d&&nt(i,_,{get:()=>a[_],enumerable:!(f=xo(a,_))||f.enumerable});return i},To=i=>Oo(nt({},"__esModule",{value:!0}),i),Wt={};No(Wt,{createLogger:()=>qt,logger:()=>Bo});var wo=To(Wt),me=void 0,Kt=()=>{if(typeof me<"u")return me;const i=console.log;try{const a="color test",d="color: red;";me=!1,console.log=(...f)=>{f[0]===`%c${a}`&&f[1]===d&&(me=!0)},console.log(`%c${a}`,d)}catch{me=!1}finally{console.log=i}return me},Ye={bold:"font-weight: bold;",red:"color: red;",green:"color: green;",orange:"color: orange;",dodgerblue:"color: dodgerblue;",magenta:"color: magenta;",gray:"color: gray;"},he=i=>Kt()?a=>{if(Array.isArray(a)){const[d,f]=a;return[`%c${d.replace("%c","")}`,f?`${Ye[i]}${f}`:`${Ye[i]||""}`]}return[`%c${String(a).replace("%c","")}`,Ye[i]||""]}:a=>[String(a)],Xe=he("bold"),Ao=he("red"),Gt=he("green"),Po=he("orange"),Ut=he("dodgerblue"),Mo=he("magenta");he("gray");function Lo(i,a,d){let f=[""];if("label"in a)if(f=[(i!=="log"?d[i]:void 0)||a.label||""],a.color){const R=a.color(f[0]);Array.isArray(R)&&R.length===2?f=Xe([R[0],R[1]]):f=Xe(R[0]||"")}else f=Xe(f[0]);return f=f.filter(Boolean),f}function Do(i,a,d,f){i.length?Array.isArray(f)?console.log(...i,...f,...d):console.log(...i,a,...d):Array.isArray(f)?console.log(...f):console.log(a,...d)}var jt={error:0,warn:1,info:2,log:3,verbose:4},Fo=/at\s.*:\d+:\d+[\s\)]*$/,ko=/at\s.*\(<anonymous>\)$/,Co=i=>Fo.test(i)||ko.test(i);function Ho(i){const a={...i};if(i.labels&&typeof i.labels!="object")throw new Error("Labels must be an object");if(i.level&&typeof i.level!="string")throw new Error("Level must be a string");return a}var Go=(i={},{getLabel:a,handleError:d,finalLog:f,greet:_,LOG_TYPES:R})=>{const g=Ho(i);let y=g.level||"log",S=g.labels||{},N=(w,T,...U)=>{if(jt[R[w].level]>jt[y])return;if(T==null)return console.log();let z=R[w],H="";const fe=a(w,z,S);if(T instanceof Error)if(T.stack){let[X,...V]=T.stack.split(`
`);X.startsWith("Error: ")&&(X=X.slice(7)),H=`${X}
${d(V.join(`
`))}`}else H=T.message;else z.level==="error"&&typeof T=="string"?H=T.split(`
`).map(V=>Co(V)?d(V):V).join(`
`):H=`${T}`;f(fe,H,U,T)},P={greet:w=>N("log",_(w))};return Object.keys(R).forEach(w=>{P[w]=(...T)=>N(w,...T)}),Object.defineProperty(P,"level",{get:()=>y,set(w){y=w}}),Object.defineProperty(P,"labels",{get:()=>S,set(w){S=w}}),P.override=w=>{Object.assign(P,w)},P},de=[189,255,243],Je=[74,194,154],Bt=i=>!/[\s\n]/.test(i);function Uo(i){if(!Kt())return[i];const a=[...i],d=a.filter(Bt),f=d.length-1;if(f===0)return console.log(`%c${i}`,`color: rgb(${de.join(",")}); font-weight: bold;`),[i];let _="",R=[];return a.forEach(g=>{if(Bt(g)){const y=d.indexOf(g)/f,S=Math.round(de[0]+(Je[0]-de[0])*y),N=Math.round(de[1]+(Je[1]-de[1])*y),P=Math.round(de[2]+(Je[2]-de[2])*y);_+=`%c${g}`,R.push(`color: rgb(${S},${N},${P}); font-weight: bold;`)}else _+=g}),[_,...R]}var jo={error:{label:"error",level:"error",color:Ao},warn:{label:"warn",level:"warn",color:Po},info:{label:"info",level:"info",color:Ut},start:{label:"start",level:"info",color:Ut},ready:{label:"ready",level:"info",color:Gt},success:{label:"success",level:"info",color:Gt},log:{level:"log"},debug:{label:"debug",level:"verbose",color:Mo}};function qt(i={}){return Go(i,{handleError:a=>a,getLabel:Lo,finalLog:Do,LOG_TYPES:jo,greet:a=>Uo(a)})}var Bo=qt(),zt={};function Qe(){return Qe=s.proxy.Object.assign||function(a){for(var d=1;d<arguments.length;d++){var f=arguments[d];for(var _ in f)s.proxy.Object.prototype.hasOwnProperty.call(f,_)&&(a[_]=f[_])}return a},Qe.apply(this,arguments)}zt._extends=Qe;var Te={},Vo=wo,Ee=zt;const Wo="federation-manifest.json",st=".json",Yt="FEDERATION_DEBUG",Xt="1",F={AT:"@",HYPHEN:"-",SLASH:"/"},Y={[F.AT]:"scope_",[F.HYPHEN]:"_",[F.SLASH]:"__"},Fe={[Y[F.AT]]:F.AT,[Y[F.HYPHEN]]:F.HYPHEN,[Y[F.SLASH]]:F.SLASH},it=":",Ko="mf-manifest.json",qo="mf-stats.json",zo={NPM:"npm",APP:"app"},Yo="__MF_DEVTOOLS_MODULE_INFO__",Xo="ENCODE_NAME_PREFIX",Jo=".federation",Zo={identifier:"MFDataPrefetch",globalKey:"__PREFETCH__",library:"mf-data-prefetch",exportsKey:"__PREFETCH_EXPORTS__",fileName:"bootstrap.js"};var Qo=s.proxy.Object.freeze({__proto__:null}),en=s.proxy.Object.freeze({__proto__:null}),tn=s.proxy.Object.freeze({__proto__:null}),rn=s.proxy.Object.freeze({__proto__:null});function Jt(){return typeof s.proxy<"u"}function on(){try{if(Jt()&&s.proxy.localStorage)return s.proxy.localStorage.getItem(Yt)===Xt}catch{return!1}return!1}function Zt(){return typeof process<"u"&&Te&&Te.FEDERATION_DEBUG?s.proxy.Boolean(Te.FEDERATION_DEBUG):typeof s.proxy.FEDERATION_DEBUG<"u"&&s.proxy.Boolean(s.proxy.FEDERATION_DEBUG)?!0:on()}const Qt=function(){return typeof process<"u"&&Te?Te:{}},pe="[ Module Federation ]";function nn(i){Zt()&&(i.level="verbose")}function sn(i,a){i.labels={warn:`${a} Warn`,error:`${a} Error`,success:`${a} Success`,info:`${a} Info`,ready:`${a} Ready`,debug:`${a} Debug`}}function er(i){const a=Vo.createLogger({labels:{warn:`${pe} Warn`,error:`${pe} Error`,success:`${pe} Success`,info:`${pe} Info`,ready:`${pe} Ready`,debug:`${pe} Debug`}});return nn(a),sn(a,i),a}const an=er(pe),tr="[ Federation Runtime ]",ln=(i,a,d=it)=>{const f=i.split(d),_=Qt().NODE_ENV==="development"&&a,R="*",g=y=>y.startsWith("http")||y.includes(st);if(f.length>=2){let[y,...S]=f;i.startsWith(d)&&(S=[_||f.slice(-1)[0]],y=f.slice(0,-1).join(d));let N=_||S.join(d);return g(N)?{name:y,entry:N}:{name:y,version:N||R}}else if(f.length===1){const[y]=f;return _&&g(_)?{name:y,entry:_}:{name:y,version:_||R}}else throw`Invalid entry value: ${i}`},cn=function(...i){return i.length?i.reduce((a,d)=>d?a?`${a}${it}${d}`:d:a,""):""},at=function(i,a="",d=!1){try{const f=d?".js":"";return`${a}${i.replace(new s.proxy.RegExp(`${F.AT}`,"g"),Y[F.AT]).replace(new s.proxy.RegExp(`${F.HYPHEN}`,"g"),Y[F.HYPHEN]).replace(new s.proxy.RegExp(`${F.SLASH}`,"g"),Y[F.SLASH])}${f}`}catch(f){throw f}},un=function(i,a,d){try{let f=i;if(a){if(!f.startsWith(a))return f;f=f.replace(new s.proxy.RegExp(a,"g"),"")}return f=f.replace(new s.proxy.RegExp(`${Y[F.AT]}`,"g"),Fe[Y[F.AT]]).replace(new s.proxy.RegExp(`${Y[F.SLASH]}`,"g"),Fe[Y[F.SLASH]]).replace(new s.proxy.RegExp(`${Y[F.HYPHEN]}`,"g"),Fe[Y[F.HYPHEN]]),d&&(f=f.replace(".js","")),f}catch(f){throw f}},fn=(i,a)=>{if(!i)return"";let d=i;return d==="."&&(d="default_export"),d.startsWith("./")&&(d=d.replace("./","")),at(d,"__federation_expose_",a)},dn=(i,a)=>i?at(i,"__federation_shared_",a):"",pn=(i,a)=>{if("getPublicPath"in i){let d;return i.getPublicPath.startsWith("function")?d=new s.proxy.Function("return "+i.getPublicPath)()():d=new s.proxy.Function(i.getPublicPath)(),`${d}${a}`}else return"publicPath"in i?`${i.publicPath}${a}`:(s.proxy.console.warn("Cannot get resource URL. If in debug mode, please ignore.",i,a),"")},hn=(i,a)=>{i||rr(a)},rr=i=>{throw new s.proxy.Error(`${tr}: ${i}`)},or=i=>{s.proxy.console.warn(`${tr}: ${i}`)};function yn(i){try{return s.proxy.JSON.stringify(i,null,2)}catch{return""}}const _n=/^([\d^=v<>~]|[*xX]$)/;function mn(i){return _n.test(i)}const Ne=(i,a)=>{if(!i)return a;const f=(_=>{if(_===".")return"";if(_.startsWith("./"))return _.replace("./","");if(_.startsWith("/")){const R=_.slice(1);return R.endsWith("/")?R.slice(0,-1):R}return _})(i);return f?f.endsWith("/")?`${f}${a}`:`${f}/${a}`:a};function nr(i){return i.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/")}function En(i,a={}){var d,f;const{remotes:_={},overrides:R={},version:g}=a;let y;const S=()=>"publicPath"in i.metaData?i.metaData.publicPath==="auto"&&g?nr(g):i.metaData.publicPath:i.metaData.getPublicPath,N=s.proxy.Object.keys(R);let P={};if(!s.proxy.Object.keys(_).length){var w;P=((w=i.remotes)==null?void 0:w.reduce((x,C)=>{let W;const ie=C.federationContainerName;return N.includes(ie)?W=R[ie]:"version"in C?W=C.version:W=C.entry,x[ie]={matchedVersion:W},x},{}))||{}}s.proxy.Object.keys(_).forEach(x=>P[x]={matchedVersion:N.includes(x)?R[x]:_[x]});const{remoteEntry:{path:T,name:U,type:z},types:H,buildInfo:{buildVersion:fe},globalName:X,ssrRemoteEntry:V}=i.metaData,{exposes:te}=i;let re={version:g||"",buildVersion:fe,globalName:X,remoteEntry:Ne(T,U),remoteEntryType:z,remoteTypes:Ne(H.path,H.name),remoteTypesZip:H.zip||"",remoteTypesAPI:H.api||"",remotesInfo:P,shared:i?.shared.map(x=>({assets:x.assets,sharedName:x.name,version:x.version})),modules:te?.map(x=>({moduleName:x.name,modulePath:x.path,assets:x.assets}))};if((d=i.metaData)!=null&&d.prefetchInterface){const x=i.metaData.prefetchInterface;re=Ee._extends({},re,{prefetchInterface:x})}if((f=i.metaData)!=null&&f.prefetchEntry){const{path:x,name:C,type:W}=i.metaData.prefetchEntry;re=Ee._extends({},re,{prefetchEntry:Ne(x,C),prefetchEntryType:W})}if("publicPath"in i.metaData?y=Ee._extends({},re,{publicPath:S()}):y=Ee._extends({},re,{getPublicPath:S()}),V){const x=Ne(V.path,V.name);y.ssrRemoteEntry=x,y.ssrRemoteEntryType=V.type||"commonjs-module"}return y}function gn(i){return!!("remoteEntry"in i&&i.remoteEntry.includes(st))}async function lt(i,a){try{return await i()}catch(d){!a&&or(d);return}}function ct(i,a){const d=/^(https?:)?\/\//i,f=i.replace(d,"").replace(/\/$/,""),_=a.replace(d,"").replace(/\/$/,"");return f===_}function sr(i){let a=null,d=!0,f=2e4,_;const R=s.proxy.document.getElementsByTagName("script");for(let y=0;y<R.length;y++){const S=R[y],N=S.getAttribute("src");if(N&&ct(N,i.url)){a=S,d=!1;break}}if(!a){const y=i.attrs;a=s.proxy.document.createElement("script"),a.type=y?.type==="module"?"module":"text/javascript";let S;i.createScriptHook&&(S=i.createScriptHook(i.url,i.attrs),S instanceof s.proxy.HTMLScriptElement?a=S:typeof S=="object"&&("script"in S&&S.script&&(a=S.script),"timeout"in S&&S.timeout&&(f=S.timeout))),a.src||(a.src=i.url),y&&!S&&s.proxy.Object.keys(y).forEach(N=>{a&&(N==="async"||N==="defer"?a[N]=y[N]:a.getAttribute(N)||a.setAttribute(N,y[N]))})}const g=async(y,S)=>{s.proxy.clearTimeout(_);const N=()=>{S?.type==="error"?i?.onErrorCallback&&i?.onErrorCallback(S):i?.cb&&i?.cb()};if(a&&(a.onerror=null,a.onload=null,lt(()=>{const{needDeleteScript:P=!0}=i;P&&a?.parentNode&&a.parentNode.removeChild(a)}),y&&typeof y=="function")){const P=y(S);if(P instanceof s.proxy.Promise){const w=await P;return N(),w}return N(),P}N()};return a.onerror=g.bind(null,a.onerror),a.onload=g.bind(null,a.onload),_=s.proxy.setTimeout(()=>{g(null,new s.proxy.Error(`Remote script "${i.url}" time-outed.`))},f),{script:a,needAttach:d}}function bn(i){let a=null,d=!0;const f=s.proxy.document.getElementsByTagName("link");for(let R=0;R<f.length;R++){const g=f[R],y=g.getAttribute("href"),S=g.getAttribute("ref");if(y&&ct(y,i.url)&&S===i.attrs.ref){a=g,d=!1;break}}if(!a){a=s.proxy.document.createElement("link"),a.setAttribute("href",i.url);let R;const g=i.attrs;i.createLinkHook&&(R=i.createLinkHook(i.url,g),R instanceof s.proxy.HTMLLinkElement&&(a=R)),g&&!R&&s.proxy.Object.keys(g).forEach(y=>{a&&!a.getAttribute(y)&&a.setAttribute(y,g[y])})}const _=(R,g)=>{const y=()=>{g?.type==="error"?i?.onErrorCallback&&i?.onErrorCallback(g):i?.cb&&i?.cb()};if(a&&(a.onerror=null,a.onload=null,lt(()=>{const{needDeleteLink:S=!0}=i;S&&a?.parentNode&&a.parentNode.removeChild(a)}),R)){const S=R(g);return y(),S}y()};return a.onerror=_.bind(null,a.onerror),a.onload=_.bind(null,a.onload),{link:a,needAttach:d}}function Sn(i,a){const{attrs:d={},createScriptHook:f}=a;return new s.proxy.Promise((_,R)=>{const{script:g,needAttach:y}=sr({url:i,cb:_,onErrorCallback:R,attrs:Ee._extends({fetchpriority:"high"},d),createScriptHook:f,needDeleteScript:!0});y&&s.proxy.document.head.appendChild(g)})}function Oe(i){if(!i)throw new s.proxy.Error("import specifier is required");return new s.proxy.Function("name","return import(name)")(i).then(d=>d).catch(d=>{throw s.proxy.console.error(`Error importing module ${i}:`,d),d})}const ir=async()=>{const i=await Oe("node-fetch");return i.default||i},Rn=async(i,a,d)=>{const _=await((R,g)=>d.lifecycle.fetch.emit(R,g))(i,a||{});return!_||!(_ instanceof s.proxy.Response)?(typeof s.proxy.fetch>"u"?await ir():s.proxy.fetch)(i,a||{}):_};function ar(i,a,d,f){if(f?.createScriptHook){const y=f.createScriptHook(i);y&&typeof y=="object"&&"url"in y&&(i=y.url)}let _;try{_=new s.proxy.URL(i)}catch(y){s.proxy.console.error("Error constructing URL:",y),a(new s.proxy.Error(`Invalid URL: ${y}`));return}const R=async()=>f?.fetch?(y,S)=>Rn(y,S,f):typeof s.proxy.fetch>"u"?ir():s.proxy.fetch,g=async(y,S)=>{try{var N;const T=await(await y(S.href)).text(),[U,z]=await s.proxy.Promise.all([Oe("path"),Oe("vm")]),H={exports:{},module:{exports:{}}},fe=S.pathname.split("/").slice(0,-1).join("/"),X=U.basename(S.pathname);var P;new z.Script(`(function(exports, module, require, __dirname, __filename) {${T}
})`,{filename:X,importModuleDynamically:(P=(N=z.constants)==null?void 0:N.USE_MAIN_CONTEXT_DEFAULT_LOADER)!=null?P:Oe}).runInThisContext()(H.exports,H.module,s.proxy.eval("require"),fe,X);const te=H.module.exports||H.exports;if(d&&te&&d.globalName){const re=te[d.globalName]||te;a(void 0,re);return}a(void 0,te)}catch(w){a(w instanceof s.proxy.Error?w:new s.proxy.Error(`Script execution error: ${w}`))}};R().then(async y=>{if(d?.type==="esm"||d?.type==="module")return et(_.href,{fetch:y,vm:await Oe("vm")}).then(async S=>{await S.evaluate(),a(void 0,S.namespace)}).catch(S=>{a(S instanceof s.proxy.Error?S:new s.proxy.Error(`Script execution error: ${S}`))});g(y,_)}).catch(y=>{a(y)})}function vn(i,a){return new s.proxy.Promise((d,f)=>{ar(i,(_,R)=>{if(_)f(_);else{var g,y;const S=(a==null||(g=a.attrs)==null?void 0:g.globalName)||`__FEDERATION_${a==null||(y=a.attrs)==null?void 0:y.name}:custom__`,N=s.proxy.globalThis[S]=R;d(N)}},a.attrs,a.loaderHook)})}async function et(i,a){const{fetch:d,vm:f}=a,R=await(await d(i)).text(),g=new f.SourceTextModule(R,{importModuleDynamically:async(y,S)=>{const N=new s.proxy.URL(y,i).href;return et(N,a)}});return await g.link(async y=>{const S=new s.proxy.URL(y,i).href;return await et(S,a)}),g}function xn(i,a,d){return function(f){if(f===!1)return!1;if(typeof f>"u")return i?a:!1;if(f===!0)return a;if(f&&typeof f=="object")return Ee._extends({},a,f);throw new s.proxy.Error(`Unexpected type for \`${d}\`, expect boolean/undefined/object, got: ${typeof f}`)}}v.BROWSER_LOG_KEY=Yt;v.BROWSER_LOG_VALUE=Xt;v.ENCODE_NAME_PREFIX=Xo;v.EncodedNameTransformMap=Fe;v.FederationModuleManifest=Wo;v.MANIFEST_EXT=st;v.MFModuleType=zo;v.MFPrefetchCommon=Zo;v.MODULE_DEVTOOL_IDENTIFIER=Yo;v.ManifestFileName=Ko;v.NameTransformMap=Y;v.NameTransformSymbol=F;v.SEPARATOR=it;v.StatsFileName=qo;v.TEMP_DIR=Jo;v.assert=hn;v.composeKeyWithSeparator=cn;v.containerPlugin=Qo;v.containerReferencePlugin=en;v.createLink=bn;v.createLogger=er;v.createScript=sr;v.createScriptNode=ar;v.decodeName=un;v.encodeName=at;v.error=rr;v.generateExposeFilename=fn;v.generateShareFilename=dn;v.generateSnapshotFromManifest=En;v.getProcessEnv=Qt;v.getResourceUrl=pn;v.inferAutoPublicPath=nr;v.isBrowserEnv=Jt;v.isDebugMode=Zt;v.isManifestProvider=gn;v.isRequiredVersion=mn;v.isStaticResourcesEqual=ct;v.loadScript=Sn;v.loadScriptNode=vn;v.logger=an;v.moduleFederationPlugin=tn;v.normalizeOptions=xn;v.parseEntry=ln;v.safeToString=yn;v.safeWrapper=lt;v.sharePlugin=rn;v.simpleJoinRemoteEntry=Ne;v.warn=or;var G={};const lr="RUNTIME-001",cr="RUNTIME-002",ur="RUNTIME-003",fr="RUNTIME-004",dr="RUNTIME-005",pr="RUNTIME-006",hr="RUNTIME-007",yr="RUNTIME-008",_r="TYPE-001",mr="BUILD-001",In=i=>`https://module-federation.io/guide/troubleshooting/${i.split("-")[0].toLowerCase()}/${i}`,$n=(i,a,d,f)=>{const _=[`${[a[i]]} #${i}`];return d&&_.push(`args: ${s.proxy.JSON.stringify(d)}`),_.push(In(i)),f&&_.push(`Original Error Message:
 ${f}`),_.join(`
`)};function tt(){return tt=s.proxy.Object.assign||function(a){for(var d=1;d<arguments.length;d++){var f=arguments[d];for(var _ in f)s.proxy.Object.prototype.hasOwnProperty.call(f,_)&&(a[_]=f[_])}return a},tt.apply(this,arguments)}const Er={[lr]:"Failed to get remoteEntry exports.",[cr]:'The remote entry interface does not contain "init"',[ur]:"Failed to get manifest.",[fr]:"Failed to locate remote.",[dr]:"Invalid loadShareSync function call from bundler runtime",[pr]:"Invalid loadShareSync function call from runtime",[hr]:"Failed to get remote snapshot.",[yr]:"Failed to load script resources."},gr={[_r]:"Failed to generate type declaration."},br={[mr]:"Failed to find expose module."},Nn=tt({},Er,gr,br);G.BUILD_001=mr;G.RUNTIME_001=lr;G.RUNTIME_002=cr;G.RUNTIME_003=ur;G.RUNTIME_004=fr;G.RUNTIME_005=dr;G.RUNTIME_006=pr;G.RUNTIME_007=hr;G.RUNTIME_008=yr;G.TYPE_001=_r;G.buildDescMap=br;G.errorDescMap=Nn;G.getShortErrorMsg=$n;G.runtimeDescMap=Er;G.typeDescMap=gr;(function(i){var a=ot,d=v,f=G;const _="[ Federation Runtime ]",R=d.createLogger(_);function g(t,e){t||y(e)}function y(t){throw t instanceof s.proxy.Error?(t.message=`${_}: ${t.message}`,t):new s.proxy.Error(`${_}: ${t}`)}function S(t){t instanceof s.proxy.Error&&(t.message=`${_}: ${t.message}`),R.warn(t)}function N(t,e){return t.findIndex(r=>r===e)===-1&&t.push(e),t}function P(t){return"version"in t&&t.version?`${t.name}:${t.version}`:"entry"in t&&t.entry?`${t.name}:${t.entry}`:`${t.name}`}function w(t){return typeof t.entry<"u"}function T(t){return!t.entry.includes(".json")&&t.entry.includes(".js")}async function U(t,e){try{return await t()}catch(r){!e&&S(r);return}}function z(t){return t&&typeof t=="object"}const H=s.proxy.Object.prototype.toString;function fe(t){return H.call(t)==="[object Object]"}function X(t,e){const r=/^(https?:)?\/\//i,o=t.replace(r,"").replace(/\/$/,""),n=e.replace(r,"").replace(/\/$/,"");return o===n}function V(t){return s.proxy.Array.isArray(t)?t:[t]}function te(t){const e={url:"",type:"global",globalName:""};return d.isBrowserEnv()?"remoteEntry"in t?{url:t.remoteEntry,type:t.remoteEntryType,globalName:t.globalName}:e:"ssrRemoteEntry"in t?{url:t.ssrRemoteEntry||e.url,type:t.ssrRemoteEntryType||e.type,globalName:t.globalName}:e}const re=(t,e)=>{let r;return t.endsWith("/")?r=t.slice(0,-1):r=t,e.startsWith(".")&&(e=e.slice(1)),r=r+e,r},x=typeof s.proxy.globalThis=="object"?s.proxy.globalThis:s.proxy,C=(()=>{try{return s.proxy.document.defaultView}catch{return x}})(),W=C;function ie(t,e,r){s.proxy.Object.defineProperty(t,e,{value:r,configurable:!1,writable:!0})}function we(t,e){return s.proxy.Object.hasOwnProperty.call(t,e)}we(x,"__GLOBAL_LOADING_REMOTE_ENTRY__")||ie(x,"__GLOBAL_LOADING_REMOTE_ENTRY__",{});const ae=x.__GLOBAL_LOADING_REMOTE_ENTRY__;function ut(t){var e,r,o,n,u,l;we(t,"__VMOK__")&&!we(t,"__FEDERATION__")&&ie(t,"__FEDERATION__",t.__VMOK__),we(t,"__FEDERATION__")||(ie(t,"__FEDERATION__",{__GLOBAL_PLUGIN__:[],__INSTANCES__:[],moduleInfo:{},__SHARE__:{},__MANIFEST_LOADING__:{},__PRELOADED_MAP__:new s.proxy.Map}),ie(t,"__VMOK__",t.__FEDERATION__));var c;(c=(e=t.__FEDERATION__).__GLOBAL_PLUGIN__)!=null||(e.__GLOBAL_PLUGIN__=[]);var p;(p=(r=t.__FEDERATION__).__INSTANCES__)!=null||(r.__INSTANCES__=[]);var h;(h=(o=t.__FEDERATION__).moduleInfo)!=null||(o.moduleInfo={});var b;(b=(n=t.__FEDERATION__).__SHARE__)!=null||(n.__SHARE__={});var E;(E=(u=t.__FEDERATION__).__MANIFEST_LOADING__)!=null||(u.__MANIFEST_LOADING__={});var m;(m=(l=t.__FEDERATION__).__PRELOADED_MAP__)!=null||(l.__PRELOADED_MAP__=new s.proxy.Map)}ut(x),ut(C);function ft(){x.__FEDERATION__.__GLOBAL_PLUGIN__=[],x.__FEDERATION__.__INSTANCES__=[],x.__FEDERATION__.moduleInfo={},x.__FEDERATION__.__SHARE__={},x.__FEDERATION__.__MANIFEST_LOADING__={},s.proxy.Object.keys(ae).forEach(t=>{delete ae[t]})}function dt(t){x.__FEDERATION__.__INSTANCES__.push(t)}function pt(){return x.__FEDERATION__.__DEBUG_CONSTRUCTOR__}function ht(t,e=d.isDebugMode()){e&&(x.__FEDERATION__.__DEBUG_CONSTRUCTOR__=t,x.__FEDERATION__.__DEBUG_CONSTRUCTOR_VERSION__="0.6.20")}function le(t,e){if(typeof e=="string"){if(t[e])return{value:t[e],key:e};{const o=s.proxy.Object.keys(t);for(const n of o){const[u,l]=n.split(":"),c=`${u}:${e}`,p=t[c];if(p)return{value:p,key:c}}return{value:s.proxy.undefined,key:e}}}else throw new s.proxy.Error("key must be string")}const Ae=()=>C.__FEDERATION__.moduleInfo,yt=(t,e)=>{const r=P(t),o=le(e,r).value;if(o&&!o.version&&"version"in t&&t.version&&(o.version=t.version),o)return o;if("version"in t&&t.version){const{version:n}=t,u=a._object_without_properties_loose(t,["version"]),l=P(u),c=le(C.__FEDERATION__.moduleInfo,l).value;if(c?.version===n)return c}},ge=t=>yt(t,C.__FEDERATION__.moduleInfo),ke=(t,e)=>{const r=P(t);return C.__FEDERATION__.moduleInfo[r]=e,C.__FEDERATION__.moduleInfo},Ce=t=>(C.__FEDERATION__.moduleInfo=a._extends({},C.__FEDERATION__.moduleInfo,t),()=>{const e=s.proxy.Object.keys(t);for(const r of e)delete C.__FEDERATION__.moduleInfo[r]}),be=(t,e)=>{const r=e||`__FEDERATION_${t}:custom__`,o=x[r];return{remoteEntryKey:r,entryExports:o}},_t=t=>{const{__GLOBAL_PLUGIN__:e}=C.__FEDERATION__;t.forEach(r=>{e.findIndex(o=>o.name===r.name)===-1?e.push(r):S(`The plugin ${r.name} has been registered.`)})},mt=()=>C.__FEDERATION__.__GLOBAL_PLUGIN__,Et=t=>x.__FEDERATION__.__PRELOADED_MAP__.get(t),gt=t=>x.__FEDERATION__.__PRELOADED_MAP__.set(t,!0),Se="default",bt="global",St="[0-9A-Za-z-]+",He=`(?:\\+(${St}(?:\\.${St})*))`,Re="0|[1-9]\\d*",Pe="[0-9]+",Rt="\\d*[a-zA-Z-][a-zA-Z0-9-]*",vt=`(?:${Pe}|${Rt})`,xr=`(?:-?(${vt}(?:\\.${vt})*))`,xt=`(?:${Re}|${Rt})`,It=`(?:-(${xt}(?:\\.${xt})*))`,Ge=`${Re}|x|X|\\*`,ye=`[v=\\s]*(${Ge})(?:\\.(${Ge})(?:\\.(${Ge})(?:${It})?${He}?)?)?`,Ir=`^\\s*(${ye})\\s+-\\s+(${ye})\\s*$`,$r=`[v=\\s]*${`(${Pe})\\.(${Pe})\\.(${Pe})`}${xr}?${He}?`,Ue="((?:<|>)?=?)",Nr=`(\\s*)${Ue}\\s*(${$r}|${ye})`,$t="(?:~>?)",Or=`(\\s*)${$t}\\s+`,Nt="(?:\\^)",Tr=`(\\s*)${Nt}\\s+`,wr="(<|>)?=?\\s*\\*",Ar=`^${Nt}${ye}$`,Pr=`v?${`(${Re})\\.(${Re})\\.(${Re})`}${It}?${He}?`,Mr=`^${$t}${ye}$`,Lr=`^${Ue}\\s*${ye}$`,Dr=`^${Ue}\\s*(${Pr})$|^$`,Fr="^\\s*>=\\s*0.0.0\\s*$";function oe(t){return new s.proxy.RegExp(t)}function j(t){return!t||t.toLowerCase()==="x"||t==="*"}function Ot(...t){return e=>t.reduce((r,o)=>o(r),e)}function Tt(t){return t.match(oe(Dr))}function wt(t,e,r,o){const n=`${t}.${e}.${r}`;return o?`${n}-${o}`:n}function kr(t){return t.replace(oe(Ir),(e,r,o,n,u,l,c,p,h,b,E,m)=>(j(o)?r="":j(n)?r=`>=${o}.0.0`:j(u)?r=`>=${o}.${n}.0`:r=`>=${r}`,j(h)?p="":j(b)?p=`<${s.proxy.Number(h)+1}.0.0-0`:j(E)?p=`<${h}.${s.proxy.Number(b)+1}.0-0`:m?p=`<=${h}.${b}.${E}-${m}`:p=`<=${p}`,`${r} ${p}`.trim()))}function Cr(t){return t.replace(oe(Nr),"$1$2$3")}function Hr(t){return t.replace(oe(Or),"$1~")}function Gr(t){return t.replace(oe(Tr),"$1^")}function Ur(t){return t.trim().split(/\s+/).map(e=>e.replace(oe(Ar),(r,o,n,u,l)=>j(o)?"":j(n)?`>=${o}.0.0 <${s.proxy.Number(o)+1}.0.0-0`:j(u)?o==="0"?`>=${o}.${n}.0 <${o}.${s.proxy.Number(n)+1}.0-0`:`>=${o}.${n}.0 <${s.proxy.Number(o)+1}.0.0-0`:l?o==="0"?n==="0"?`>=${o}.${n}.${u}-${l} <${o}.${n}.${s.proxy.Number(u)+1}-0`:`>=${o}.${n}.${u}-${l} <${o}.${s.proxy.Number(n)+1}.0-0`:`>=${o}.${n}.${u}-${l} <${s.proxy.Number(o)+1}.0.0-0`:o==="0"?n==="0"?`>=${o}.${n}.${u} <${o}.${n}.${s.proxy.Number(u)+1}-0`:`>=${o}.${n}.${u} <${o}.${s.proxy.Number(n)+1}.0-0`:`>=${o}.${n}.${u} <${s.proxy.Number(o)+1}.0.0-0`)).join(" ")}function jr(t){return t.trim().split(/\s+/).map(e=>e.replace(oe(Mr),(r,o,n,u,l)=>j(o)?"":j(n)?`>=${o}.0.0 <${s.proxy.Number(o)+1}.0.0-0`:j(u)?`>=${o}.${n}.0 <${o}.${s.proxy.Number(n)+1}.0-0`:l?`>=${o}.${n}.${u}-${l} <${o}.${s.proxy.Number(n)+1}.0-0`:`>=${o}.${n}.${u} <${o}.${s.proxy.Number(n)+1}.0-0`)).join(" ")}function Br(t){return t.split(/\s+/).map(e=>e.trim().replace(oe(Lr),(r,o,n,u,l,c)=>{const p=j(n),h=p||j(u),b=h||j(l);return o==="="&&b&&(o=""),c="",p?o===">"||o==="<"?"<0.0.0-0":"*":o&&b?(h&&(u=0),l=0,o===">"?(o=">=",h?(n=s.proxy.Number(n)+1,u=0,l=0):(u=s.proxy.Number(u)+1,l=0)):o==="<="&&(o="<",h?n=s.proxy.Number(n)+1:u=s.proxy.Number(u)+1),o==="<"&&(c="-0"),`${o+n}.${u}.${l}${c}`):h?`>=${n}.0.0${c} <${s.proxy.Number(n)+1}.0.0-0`:b?`>=${n}.${u}.0${c} <${n}.${s.proxy.Number(u)+1}.0-0`:r})).join(" ")}function Vr(t){return t.trim().replace(oe(wr),"")}function Wr(t){return t.trim().replace(oe(Fr),"")}function Me(t,e){return t=s.proxy.Number(t)||t,e=s.proxy.Number(e)||e,t>e?1:t===e?0:-1}function Kr(t,e){const{preRelease:r}=t,{preRelease:o}=e;if(r===s.proxy.undefined&&s.proxy.Boolean(o))return 1;if(s.proxy.Boolean(r)&&o===s.proxy.undefined)return-1;if(r===s.proxy.undefined&&o===s.proxy.undefined)return 0;for(let n=0,u=r.length;n<=u;n++){const l=r[n],c=o[n];if(l!==c)return l===s.proxy.undefined&&c===s.proxy.undefined?0:l?c?Me(l,c):-1:1}return 0}function Le(t,e){return Me(t.major,e.major)||Me(t.minor,e.minor)||Me(t.patch,e.patch)||Kr(t,e)}function je(t,e){return t.version===e.version}function qr(t,e){switch(t.operator){case"":case"=":return je(t,e);case">":return Le(t,e)<0;case">=":return je(t,e)||Le(t,e)<0;case"<":return Le(t,e)>0;case"<=":return je(t,e)||Le(t,e)>0;case s.proxy.undefined:return!0;default:return!1}}function zr(t){return Ot(Ur,jr,Br,Vr)(t)}function Yr(t){return Ot(kr,Cr,Hr,Gr)(t.trim()).split(/\s+/).join(" ")}function ve(t,e){if(!t)return!1;const n=Yr(e).split(" ").map(m=>zr(m)).join(" ").split(/\s+/).map(m=>Wr(m)),u=Tt(t);if(!u)return!1;const[,l,,c,p,h,b]=u,E={version:wt(c,p,h,b),major:c,minor:p,patch:h,preRelease:b?.split(".")};for(const m of n){const I=Tt(m);if(!I)return!1;const[,O,,M,$,A,k]=I,L={operator:O,version:wt(M,$,A,k),major:M,minor:$,patch:A,preRelease:k?.split(".")};if(!qr(L,E))return!1}return!0}function Xr(t,e,r,o){let n;"get"in t?n=t.get:"lib"in t?n=()=>s.proxy.Promise.resolve(t.lib):n=()=>s.proxy.Promise.resolve(()=>{throw new s.proxy.Error(`Can not get shared '${r}'!`)}),t.strategy&&S('"shared.strategy is deprecated, please set in initOptions.shareStrategy instead!"');var u,l,c;return a._extends({deps:[],useIn:[],from:e,loading:null},t,{shareConfig:a._extends({requiredVersion:`^${t.version}`,singleton:!1,eager:!1,strictVersion:!1},t.shareConfig),get:n,loaded:t?.loaded||"lib"in t?!0:s.proxy.undefined,version:(u=t.version)!=null?u:"0",scope:s.proxy.Array.isArray(t.scope)?t.scope:[(l=t.scope)!=null?l:"default"],strategy:((c=t.strategy)!=null?c:o)||"version-first"})}function At(t,e){const r=e.shared||{},o=e.name,n=s.proxy.Object.keys(r).reduce((l,c)=>{const p=V(r[c]);return l[c]=l[c]||[],p.forEach(h=>{l[c].push(Xr(h,o,c,e.shareStrategy))}),l},{}),u=a._extends({},t.shared);return s.proxy.Object.keys(n).forEach(l=>{u[l]?n[l].forEach(c=>{u[l].find(h=>h.version===c.version)||u[l].push(c)}):u[l]=n[l]}),{shared:u,shareInfos:n}}function xe(t,e){const r=o=>{if(!s.proxy.Number.isNaN(s.proxy.Number(o))){const u=o.split(".");let l=o;for(let c=0;c<3-u.length;c++)l+=".0";return l}return o};return!!ve(r(t),`<=${r(e)}`)}const Be=(t,e)=>{const r=e||function(o,n){return xe(o,n)};return s.proxy.Object.keys(t).reduce((o,n)=>!o||r(o,n)||o==="0"?n:o,0)},Ve=t=>s.proxy.Boolean(t.loaded)||typeof t.lib=="function",Jr=t=>s.proxy.Boolean(t.loading);function Zr(t,e,r){const o=t[e][r],n=function(u,l){return!Ve(o[u])&&xe(u,l)};return Be(t[e][r],n)}function Qr(t,e,r){const o=t[e][r],n=function(u,l){const c=p=>Ve(p)||Jr(p);return c(o[l])?c(o[u])?s.proxy.Boolean(xe(u,l)):!0:c(o[u])?!1:xe(u,l)};return Be(t[e][r],n)}function eo(t){return t==="loaded-first"?Qr:Zr}function ce(t,e,r,o){if(!t)return;const{shareConfig:n,scope:u=Se,strategy:l}=r,c=s.proxy.Array.isArray(u)?u:[u];for(const p of c)if(n&&t[p]&&t[p][e]){const{requiredVersion:h}=n,E=eo(l)(t,p,e),m=()=>{if(n.singleton){if(typeof h=="string"&&!ve(E,h)){const M=`Version ${E} from ${E&&t[p][e][E].from} of shared singleton module ${e} does not satisfy the requirement of ${r.from} which needs ${h})`;n.strictVersion?y(M):S(M)}return t[p][e][E]}else{if(h===!1||h==="*"||ve(E,h))return t[p][e][E];for(const[M,$]of s.proxy.Object.entries(t[p][e]))if(ve(M,h))return $}},I={shareScopeMap:t,scope:p,pkgName:e,version:E,GlobalFederation:W.__FEDERATION__,resolver:m};return(o.emit(I)||I).resolver()}}function We(){return W.__FEDERATION__.__SHARE__}function Pt(t){const{pkgName:e,extraOptions:r,shareInfos:o}=t,n=c=>{if(!c)return s.proxy.undefined;const p={};c.forEach(E=>{p[E.version]=E});const b=Be(p,function(E,m){return!Ve(p[E])&&xe(E,m)});return p[b]};var u;const l=(u=r?.resolver)!=null?u:n;return s.proxy.Object.assign({},l(o[e]),r?.customShareInfo)}var to={global:{Global:W,nativeGlobal:C,resetFederationGlobalInfo:ft,setGlobalFederationInstance:dt,getGlobalFederationConstructor:pt,setGlobalFederationConstructor:ht,getInfoWithoutType:le,getGlobalSnapshot:Ae,getTargetSnapshotInfoByModuleInfo:yt,getGlobalSnapshotInfoByModuleInfo:ge,setGlobalSnapshotInfoByModuleInfo:ke,addGlobalSnapshot:Ce,getRemoteEntryExports:be,registerGlobalPlugins:_t,getGlobalHostPlugins:mt,getPreloaded:Et,setPreloaded:gt},share:{getRegisteredShare:ce,getGlobalShareScope:We}};function ro(){return typeof s.proxy.FEDERATION_BUILD_IDENTIFIER<"u"?s.proxy.FEDERATION_BUILD_IDENTIFIER:""}function Mt(t,e){for(const r of t){const o=e.startsWith(r.name);let n=e.replace(r.name,"");if(o){if(n.startsWith("/")){const c=r.name;return n=`.${n}`,{pkgNameOrAlias:c,expose:n,remote:r}}else if(n==="")return{pkgNameOrAlias:r.name,expose:".",remote:r}}const u=r.alias&&e.startsWith(r.alias);let l=r.alias&&e.replace(r.alias,"");if(r.alias&&u){if(l&&l.startsWith("/")){const c=r.alias;return l=`.${l}`,{pkgNameOrAlias:c,expose:l,remote:r}}else if(l==="")return{pkgNameOrAlias:r.alias,expose:".",remote:r}}}}function oo(t,e){for(const r of t)if(e===r.name||r.alias&&e===r.alias)return r}function no(t,e){const r=mt();return r.length>0&&r.forEach(o=>{t?.find(n=>n.name!==o.name)&&t.push(o)}),t&&t.length>0&&t.forEach(o=>{e.forEach(n=>{n.applyPlugin(o)})}),t}async function so({entry:t,remoteEntryExports:e}){return new s.proxy.Promise((r,o)=>{try{e?r(e):typeof s.proxy.FEDERATION_ALLOW_NEW_FUNCTION<"u"?new s.proxy.Function("callbacks",`import("${t}").then(callbacks[0]).catch(callbacks[1])`)([r,o]):import(t).then(r).catch(o)}catch(n){o(n)}})}async function io({entry:t,remoteEntryExports:e}){return new s.proxy.Promise((r,o)=>{try{e?r(e):typeof s.proxy.__system_context__>"u"?s.proxy.System.import(t).then(r).catch(o):new s.proxy.Function("callbacks",`System.import("${t}").then(callbacks[0]).catch(callbacks[1])`)([r,o])}catch(n){o(n)}})}async function ao({name:t,globalName:e,entry:r,loaderHook:o}){const{entryExports:n}=be(t,e);return n||d.loadScript(r,{attrs:{},createScriptHook:(u,l)=>{const c=o.lifecycle.createScript.emit({url:u,attrs:l});if(c&&(c instanceof s.proxy.HTMLScriptElement||"script"in c||"timeout"in c))return c}}).then(()=>{const{remoteEntryKey:u,entryExports:l}=be(t,e);return g(l,f.getShortErrorMsg(f.RUNTIME_001,f.runtimeDescMap,{remoteName:t,remoteEntryUrl:r,remoteEntryKey:u})),l}).catch(u=>{throw g(s.proxy.undefined,f.getShortErrorMsg(f.RUNTIME_008,f.runtimeDescMap,{remoteName:t,resourceUrl:r})),u})}async function lo({remoteInfo:t,remoteEntryExports:e,loaderHook:r}){const{entry:o,entryGlobalName:n,name:u,type:l}=t;switch(l){case"esm":case"module":return so({entry:o,remoteEntryExports:e});case"system":return io({entry:o,remoteEntryExports:e});default:return ao({entry:o,globalName:n,name:u,loaderHook:r})}}async function co({remoteInfo:t,loaderHook:e}){const{entry:r,entryGlobalName:o,name:n,type:u}=t,{entryExports:l}=be(n,o);return l||d.loadScriptNode(r,{attrs:{name:n,globalName:o,type:u},loaderHook:{createScriptHook:(c,p={})=>{const h=e.lifecycle.createScript.emit({url:c,attrs:p});if(h&&"url"in h)return h}}}).then(()=>{const{remoteEntryKey:c,entryExports:p}=be(n,o);return g(p,f.getShortErrorMsg(f.RUNTIME_001,f.runtimeDescMap,{remoteName:n,remoteEntryUrl:r,remoteEntryKey:c})),p}).catch(c=>{throw c})}function Ke(t){const{entry:e,name:r}=t;return d.composeKeyWithSeparator(r,e)}async function Ie({origin:t,remoteEntryExports:e,remoteInfo:r}){const o=Ke(r);if(e)return e;if(!ae[o]){const n=t.remoteHandler.hooks.lifecycle.loadEntry,u=t.loaderHook;ae[o]=n.emit({loaderHook:u,remoteInfo:r,remoteEntryExports:e}).then(l=>l||(d.isBrowserEnv()?lo({remoteInfo:r,remoteEntryExports:e,loaderHook:u}):co({remoteInfo:r,loaderHook:u})))}return ae[o]}function De(t){return a._extends({},t,{entry:"entry"in t?t.entry:"",type:t.type||bt,entryGlobalName:t.entryGlobalName||t.name,shareScope:t.shareScope||Se})}let qe=class{async getEntry(){if(this.remoteEntryExports)return this.remoteEntryExports;let e;try{e=await Ie({origin:this.host,remoteInfo:this.remoteInfo,remoteEntryExports:this.remoteEntryExports})}catch{const o=Ke(this.remoteInfo);e=await this.host.loaderHook.lifecycle.loadEntryError.emit({getRemoteEntry:Ie,origin:this.host,remoteInfo:this.remoteInfo,remoteEntryExports:this.remoteEntryExports,globalLoading:ae,uniqueKey:o})}return g(e,`remoteEntryExports is undefined 
 ${d.safeToString(this.remoteInfo)}`),this.remoteEntryExports=e,this.remoteEntryExports}async get(e,r,o,n){const{loadFactory:u=!0}=o||{loadFactory:!0},l=await this.getEntry();if(!this.inited){const E=this.host.shareScopeMap,m=this.remoteInfo.shareScope||"default";E[m]||(E[m]={});const I=E[m],O=[],M={version:this.remoteInfo.version||""};s.proxy.Object.defineProperty(M,"shareScopeMap",{value:E,enumerable:!1});const $=await this.host.hooks.lifecycle.beforeInitContainer.emit({shareScope:I,remoteEntryInitOptions:M,initScope:O,remoteInfo:this.remoteInfo,origin:this.host});typeof l?.init>"u"&&y(f.getShortErrorMsg(f.RUNTIME_002,f.runtimeDescMap,{remoteName:s.proxy.name,remoteEntryUrl:this.remoteInfo.entry,remoteEntryKey:this.remoteInfo.entryGlobalName})),await l.init($.shareScope,$.initScope,$.remoteEntryInitOptions),await this.host.hooks.lifecycle.initContainer.emit(a._extends({},$,{id:e,remoteSnapshot:n,remoteEntryExports:l}))}this.lib=l,this.inited=!0;let c;c=await this.host.loaderHook.lifecycle.getModuleFactory.emit({remoteEntryExports:l,expose:r,moduleInfo:this.remoteInfo}),c||(c=await l.get(r)),g(c,`${P(this.remoteInfo)} remote don't export ${r}.`);const p=re(this.remoteInfo.name,r),h=this.wraperFactory(c,p);return u?await h():h}wraperFactory(e,r){function o(n,u){n&&typeof n=="object"&&s.proxy.Object.isExtensible(n)&&!s.proxy.Object.getOwnPropertyDescriptor(n,s.proxy.Symbol.for("mf_module_id"))&&s.proxy.Object.defineProperty(n,s.proxy.Symbol.for("mf_module_id"),{value:u,enumerable:!1})}return e instanceof s.proxy.Promise?async()=>{const n=await e();return o(n,r),n}:()=>{const n=e();return o(n,r),n}}constructor({remoteInfo:e,host:r}){this.inited=!1,this.lib=s.proxy.undefined,this.remoteInfo=e,this.host=r}};class J{on(e){typeof e=="function"&&this.listeners.add(e)}once(e){const r=this;this.on(function o(...n){return r.remove(o),e.apply(null,n)})}emit(...e){let r;return this.listeners.size>0&&this.listeners.forEach(o=>{r=o(...e)}),r}remove(e){this.listeners.delete(e)}removeAll(){this.listeners.clear()}constructor(e){this.type="",this.listeners=new s.proxy.Set,e&&(this.type=e)}}class Q extends J{emit(...e){let r;const o=s.proxy.Array.from(this.listeners);if(o.length>0){let n=0;const u=l=>l===!1?!1:n<o.length?s.proxy.Promise.resolve(o[n++].apply(null,e)).then(u):l;r=u()}return s.proxy.Promise.resolve(r)}}function Lt(t,e){if(!z(e))return!1;if(t!==e){for(const r in t)if(!(r in e))return!1}return!0}class $e extends J{emit(e){z(e)||y(`The data for the "${this.type}" hook should be an object.`);for(const r of this.listeners)try{const o=r(e);if(Lt(e,o))e=o;else{this.onerror(`A plugin returned an unacceptable value for the "${this.type}" type.`);break}}catch(o){S(o),this.onerror(o)}return e}constructor(e){super(),this.onerror=y,this.type=e}}class ue extends J{emit(e){z(e)||y(`The response data for the "${this.type}" hook must be an object.`);const r=s.proxy.Array.from(this.listeners);if(r.length>0){let o=0;const n=l=>(S(l),this.onerror(l),e),u=l=>{if(Lt(e,l)){if(e=l,o<r.length)try{return s.proxy.Promise.resolve(r[o++](e)).then(u,n)}catch(c){return n(c)}}else this.onerror(`A plugin returned an incorrect value for the "${this.type}" type.`);return e};return s.proxy.Promise.resolve(u(e))}return s.proxy.Promise.resolve(e)}constructor(e){super(),this.onerror=y,this.type=e}}class _e{applyPlugin(e){g(fe(e),"Plugin configuration is invalid.");const r=e.name;g(r,"A name must be provided by the plugin."),this.registerPlugins[r]||(this.registerPlugins[r]=e,s.proxy.Object.keys(this.lifecycle).forEach(o=>{const n=e[o];n&&this.lifecycle[o].on(n)}))}removePlugin(e){g(e,"A name is required.");const r=this.registerPlugins[e];g(r,`The plugin "${e}" is not registered.`),s.proxy.Object.keys(r).forEach(o=>{o!=="name"&&this.lifecycle[o].remove(r[o])})}inherit({lifecycle:e,registerPlugins:r}){s.proxy.Object.keys(e).forEach(o=>{g(!this.lifecycle[o],`The hook "${o}" has a conflict and cannot be inherited.`),this.lifecycle[o]=e[o]}),s.proxy.Object.keys(r).forEach(o=>{g(!this.registerPlugins[o],`The plugin "${o}" has a conflict and cannot be inherited.`),this.applyPlugin(r[o])})}constructor(e){this.registerPlugins={},this.lifecycle=e,this.lifecycleKeys=s.proxy.Object.keys(e)}}function Dt(t){return a._extends({resourceCategory:"sync",share:!0,depsRemote:!0,prefetchInterface:!1},t)}function uo(t,e){return e.map(r=>{const o=oo(t,r.nameOrAlias);return g(o,`Unable to preload ${r.nameOrAlias} as it is not included in ${!o&&d.safeToString({remoteInfo:o,remotes:t})}`),{remote:o,preloadConfig:Dt(r)}})}function fo(t){return t?t.map(e=>e==="."?e:e.startsWith("./")?e.replace("./",""):e):[]}function Ft(t,e,r,o=!0){const{cssAssets:n,jsAssetsWithoutEntry:u,entryAssets:l}=r;if(e.options.inBrowser){if(l.forEach(c=>{const{moduleInfo:p}=c,h=e.moduleCache.get(t.name);Ie(h?{origin:e,remoteInfo:p,remoteEntryExports:h.remoteEntryExports}:{origin:e,remoteInfo:p,remoteEntryExports:s.proxy.undefined})}),o){const c={rel:"preload",as:"style"};n.forEach(p=>{const{link:h,needAttach:b}=d.createLink({url:p,cb:()=>{},attrs:c,createLinkHook:(E,m)=>{const I=e.loaderHook.lifecycle.createLink.emit({url:E,attrs:m});if(I instanceof s.proxy.HTMLLinkElement)return I}});b&&s.proxy.document.head.appendChild(h)})}else{const c={rel:"stylesheet",type:"text/css"};n.forEach(p=>{const{link:h,needAttach:b}=d.createLink({url:p,cb:()=>{},attrs:c,createLinkHook:(E,m)=>{const I=e.loaderHook.lifecycle.createLink.emit({url:E,attrs:m});if(I instanceof s.proxy.HTMLLinkElement)return I},needDeleteLink:!1});b&&s.proxy.document.head.appendChild(h)})}if(o){const c={rel:"preload",as:"script"};u.forEach(p=>{const{link:h,needAttach:b}=d.createLink({url:p,cb:()=>{},attrs:c,createLinkHook:(E,m)=>{const I=e.loaderHook.lifecycle.createLink.emit({url:E,attrs:m});if(I instanceof s.proxy.HTMLLinkElement)return I}});b&&s.proxy.document.head.appendChild(h)})}else{const c={fetchpriority:"high",type:t?.type==="module"?"module":"text/javascript"};u.forEach(p=>{const{script:h,needAttach:b}=d.createScript({url:p,cb:()=>{},attrs:c,createScriptHook:(E,m)=>{const I=e.loaderHook.lifecycle.createScript.emit({url:E,attrs:m});if(I instanceof s.proxy.HTMLScriptElement)return I},needDeleteScript:!0});b&&s.proxy.document.head.appendChild(h)})}}}function kt(t,e){const r=te(e);r.url||y(`The attribute remoteEntry of ${t.name} must not be undefined.`);let o=d.getResourceUrl(e,r.url);!d.isBrowserEnv()&&!o.startsWith("http")&&(o=`https:${o}`),t.type=r.type,t.entryGlobalName=r.globalName,t.entry=o,t.version=e.version,t.buildVersion=e.buildVersion}function po(){return{name:"snapshot-plugin",async afterResolve(t){const{remote:e,pkgNameOrAlias:r,expose:o,origin:n,remoteInfo:u}=t;if(!w(e)||!T(e)){const{remoteSnapshot:l,globalSnapshot:c}=await n.snapshotHandler.loadRemoteSnapshotInfo(e);kt(u,l);const p={remote:e,preloadConfig:{nameOrAlias:r,exposes:[o],resourceCategory:"sync",share:!1,depsRemote:!1}},h=await n.remoteHandler.hooks.lifecycle.generatePreloadAssets.emit({origin:n,preloadOptions:p,remoteInfo:u,remote:e,remoteSnapshot:l,globalSnapshot:c});return h&&Ft(u,n,h,!1),a._extends({},t,{remoteSnapshot:l})}return t}}}function ho(t){const e=t.split(":");return e.length===1?{name:e[0],version:s.proxy.undefined}:e.length===2?{name:e[0],version:e[1]}:{name:e[1],version:e[2]}}function Ct(t,e,r,o,n={},u){const l=P(e),{value:c}=le(t,l),p=u||c;if(p&&!d.isManifestProvider(p)&&(r(p,e,o),p.remotesInfo)){const h=s.proxy.Object.keys(p.remotesInfo);for(const b of h){if(n[b])continue;n[b]=!0;const E=ho(b),m=p.remotesInfo[b];Ct(t,{name:E.name,version:m.matchedVersion},r,!1,n,s.proxy.undefined)}}}function yo(t,e,r,o,n){const u=[],l=[],c=[],p=new s.proxy.Set,h=new s.proxy.Set,{options:b}=t,{preloadConfig:E}=e,{depsRemote:m}=E;if(Ct(o,r,($,A,k)=>{let L;if(k)L=E;else if(s.proxy.Array.isArray(m)){const ee=m.find(Z=>Z.nameOrAlias===A.name||Z.nameOrAlias===A.alias);if(!ee)return;L=Dt(ee)}else if(m===!0)L=E;else return;const D=d.getResourceUrl($,te($).url);D&&c.push({name:A.name,moduleInfo:{name:A.name,entry:D,type:"remoteEntryType"in $?$.remoteEntryType:"global",entryGlobalName:"globalName"in $?$.globalName:A.name,shareScope:"",version:"version"in $?$.version:s.proxy.undefined},url:D});let K="modules"in $?$.modules:[];const q=fo(L.exposes);if(q.length&&"modules"in $){var se;K=$==null||(se=$.modules)==null?void 0:se.reduce((ee,Z)=>(q?.indexOf(Z.moduleName)!==-1&&ee.push(Z),ee),[])}function B(ee){const Z=ee.map(ne=>d.getResourceUrl($,ne));return L.filter?Z.filter(L.filter):Z}if(K){const ee=K.length;for(let Z=0;Z<ee;Z++){const ne=K[Z],ze=`${A.name}/${ne.moduleName}`;t.remoteHandler.hooks.lifecycle.handlePreloadModule.emit({id:ne.moduleName==="."?A.name:ze,name:A.name,remoteSnapshot:$,preloadConfig:L,remote:A,origin:t}),!Et(ze)&&(L.resourceCategory==="all"?(u.push(...B(ne.assets.css.async)),u.push(...B(ne.assets.css.sync)),l.push(...B(ne.assets.js.async)),l.push(...B(ne.assets.js.sync))):(L.resourceCategory="sync")&&(u.push(...B(ne.assets.css.sync)),l.push(...B(ne.assets.js.sync))),gt(ze))}}},!0,{},n),n.shared){const $=(A,k)=>{const L=ce(t.shareScopeMap,k.sharedName,A,t.sharedHandler.hooks.lifecycle.resolveShare);L&&typeof L.lib=="function"&&(k.assets.js.sync.forEach(D=>{p.add(D)}),k.assets.css.sync.forEach(D=>{h.add(D)}))};n.shared.forEach(A=>{var k;const L=(k=b.shared)==null?void 0:k[A.sharedName];if(!L)return;const D=A.version?L.find(q=>q.version===A.version):L;if(!D)return;V(D).forEach(q=>{$(q,A)})})}const O=l.filter($=>!p.has($));return{cssAssets:u.filter($=>!h.has($)),jsAssetsWithoutEntry:O,entryAssets:c}}const _o=function(){return{name:"generate-preload-assets-plugin",async generatePreloadAssets(t){const{origin:e,preloadOptions:r,remoteInfo:o,remote:n,globalSnapshot:u,remoteSnapshot:l}=t;return w(n)&&T(n)?{cssAssets:[],jsAssetsWithoutEntry:[],entryAssets:[{name:n.name,url:n.entry,moduleInfo:{name:o.name,entry:n.entry,type:o.type||"global",entryGlobalName:"",shareScope:""}}]}:(kt(o,l),yo(e,r,o,u,l))}}};function Ht(t,e){const r=ge({name:e.options.name,version:e.options.version}),o=r&&"remotesInfo"in r&&r.remotesInfo&&le(r.remotesInfo,t.name).value;return o&&o.matchedVersion?{hostGlobalSnapshot:r,globalSnapshot:Ae(),remoteSnapshot:ge({name:t.name,version:o.matchedVersion})}:{hostGlobalSnapshot:s.proxy.undefined,globalSnapshot:Ae(),remoteSnapshot:ge({name:t.name,version:"version"in t?t.version:s.proxy.undefined})}}class mo{async loadSnapshot(e){const{options:r}=this.HostInstance,{hostGlobalSnapshot:o,remoteSnapshot:n,globalSnapshot:u}=this.getGlobalRemoteInfo(e),{remoteSnapshot:l,globalSnapshot:c}=await this.hooks.lifecycle.loadSnapshot.emit({options:r,moduleInfo:e,hostGlobalSnapshot:o,remoteSnapshot:n,globalSnapshot:u});return{remoteSnapshot:l,globalSnapshot:c}}async loadRemoteSnapshotInfo(e){const{options:r}=this.HostInstance;await this.hooks.lifecycle.beforeLoadRemoteSnapshot.emit({options:r,moduleInfo:e});let o=ge({name:this.HostInstance.options.name,version:this.HostInstance.options.version});o||(o={version:this.HostInstance.options.version||"",remoteEntry:"",remotesInfo:{}},Ce({[this.HostInstance.options.name]:o})),o&&"remotesInfo"in o&&!le(o.remotesInfo,e.name).value&&("version"in e||"entry"in e)&&(o.remotesInfo=a._extends({},o?.remotesInfo,{[e.name]:{matchedVersion:"version"in e?e.version:e.entry}}));const{hostGlobalSnapshot:n,remoteSnapshot:u,globalSnapshot:l}=this.getGlobalRemoteInfo(e),{remoteSnapshot:c,globalSnapshot:p}=await this.hooks.lifecycle.loadSnapshot.emit({options:r,moduleInfo:e,hostGlobalSnapshot:n,remoteSnapshot:u,globalSnapshot:l});let h,b;if(c)if(d.isManifestProvider(c)){const E=d.isBrowserEnv()?c.remoteEntry:c.ssrRemoteEntry||c.remoteEntry||"",m=await this.getManifestJson(E,e,{}),I=ke(a._extends({},e,{entry:E}),m);h=m,b=I}else{const{remoteSnapshot:E}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:e,remoteSnapshot:c,from:"global"});h=E,b=p}else if(w(e)){const E=await this.getManifestJson(e.entry,e,{}),m=ke(e,E),{remoteSnapshot:I}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:e,remoteSnapshot:E,from:"global"});h=I,b=m}else y(f.getShortErrorMsg(f.RUNTIME_007,f.runtimeDescMap,{hostName:e.name,hostVersion:e.version,globalSnapshot:s.proxy.JSON.stringify(p)}));return await this.hooks.lifecycle.afterLoadSnapshot.emit({options:r,moduleInfo:e,remoteSnapshot:h}),{remoteSnapshot:h,globalSnapshot:b}}getGlobalRemoteInfo(e){return Ht(e,this.HostInstance)}async getManifestJson(e,r,o){const n=async()=>{let l=this.manifestCache.get(e);if(l)return l;try{let c=await this.loaderHook.lifecycle.fetch.emit(e,{});(!c||!(c instanceof s.proxy.Response))&&(c=await s.proxy.fetch(e,{})),l=await c.json()}catch(c){l=await this.HostInstance.remoteHandler.hooks.lifecycle.errorLoadRemote.emit({id:e,error:y,from:"runtime",lifecycle:"afterResolve",origin:this.HostInstance}),l||(delete this.manifestLoading[e],y(f.getShortErrorMsg(f.RUNTIME_003,f.runtimeDescMap,{manifestUrl:e,moduleName:r.name},`${c}`)))}return g(l.metaData&&l.exposes&&l.shared,`${e} is not a federation manifest`),this.manifestCache.set(e,l),l},u=async()=>{const l=await n(),c=d.generateSnapshotFromManifest(l,{version:e}),{remoteSnapshot:p}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:r,manifestJson:l,remoteSnapshot:c,manifestUrl:e,from:"manifest"});return p};return this.manifestLoading[e]||(this.manifestLoading[e]=u().then(l=>l)),this.manifestLoading[e]}constructor(e){this.loadingHostSnapshot=null,this.manifestCache=new s.proxy.Map,this.hooks=new _e({beforeLoadRemoteSnapshot:new Q("beforeLoadRemoteSnapshot"),loadSnapshot:new ue("loadGlobalSnapshot"),loadRemoteSnapshot:new ue("loadRemoteSnapshot"),afterLoadSnapshot:new ue("afterLoadSnapshot")}),this.manifestLoading=W.__FEDERATION__.__MANIFEST_LOADING__,this.HostInstance=e,this.loaderHook=e.loaderHook}}class Eo{registerShared(e,r){const{shareInfos:o,shared:n}=At(e,r);return s.proxy.Object.keys(o).forEach(l=>{o[l].forEach(p=>{!ce(this.shareScopeMap,l,p,this.hooks.lifecycle.resolveShare)&&p&&p.lib&&this.setShared({pkgName:l,lib:p.lib,get:p.get,loaded:!0,shared:p,from:r.name})})}),{shareInfos:o,shared:n}}async loadShare(e,r){const{host:o}=this,n=Pt({pkgName:e,extraOptions:r,shareInfos:o.options.shared});n?.scope&&await s.proxy.Promise.all(n.scope.map(async h=>{await s.proxy.Promise.all(this.initializeSharing(h,{strategy:n.strategy}))}));const u=await this.hooks.lifecycle.beforeLoadShare.emit({pkgName:e,shareInfo:n,shared:o.options.shared,origin:o}),{shareInfo:l}=u;g(l,`Cannot find ${e} Share in the ${o.options.name}. Please ensure that the ${e} Share parameters have been injected`);const c=ce(this.shareScopeMap,e,l,this.hooks.lifecycle.resolveShare),p=h=>{h.useIn||(h.useIn=[]),N(h.useIn,o.options.name)};if(c&&c.lib)return p(c),c.lib;if(c&&c.loading&&!c.loaded){const h=await c.loading;return c.loaded=!0,c.lib||(c.lib=h),p(c),h}else if(c){const b=(async()=>{const E=await c.get();l.lib=E,l.loaded=!0,p(l);const m=ce(this.shareScopeMap,e,l,this.hooks.lifecycle.resolveShare);return m&&(m.lib=E,m.loaded=!0),E})();return this.setShared({pkgName:e,loaded:!1,shared:c,from:o.options.name,lib:null,loading:b}),b}else{if(r?.customShareInfo)return!1;const b=(async()=>{const E=await l.get();l.lib=E,l.loaded=!0,p(l);const m=ce(this.shareScopeMap,e,l,this.hooks.lifecycle.resolveShare);return m&&(m.lib=E,m.loaded=!0),E})();return this.setShared({pkgName:e,loaded:!1,shared:l,from:o.options.name,lib:null,loading:b}),b}}initializeSharing(e=Se,r){const{host:o}=this,n=r?.from,u=r?.strategy;let l=r?.initScope;const c=[];if(n!=="build"){const{initTokens:O}=this;l||(l=[]);let M=O[e];if(M||(M=O[e]={from:this.host.name}),l.indexOf(M)>=0)return c;l.push(M)}const p=this.shareScopeMap,h=o.options.name;p[e]||(p[e]={});const b=p[e],E=(O,M)=>{var $;const{version:A,eager:k}=M;b[O]=b[O]||{};const L=b[O],D=L[A],K=s.proxy.Boolean(D&&(D.eager||(($=D.shareConfig)==null?void 0:$.eager)));(!D||D.strategy!=="loaded-first"&&!D.loaded&&(s.proxy.Boolean(!k)!==!K?k:h>D.from))&&(L[A]=M)},m=O=>O&&O.init&&O.init(p[e],l),I=async O=>{const{module:M}=await o.remoteHandler.getRemoteModuleAndOptions({id:O});if(M.getEntry){let $;try{$=await M.getEntry()}catch(A){$=await o.remoteHandler.hooks.lifecycle.errorLoadRemote.emit({id:O,error:A,from:"runtime",lifecycle:"beforeLoadShare",origin:o})}M.inited||(await m($),M.inited=!0)}};return s.proxy.Object.keys(o.options.shared).forEach(O=>{o.options.shared[O].forEach($=>{$.scope.includes(e)&&E(O,$)})}),(o.options.shareStrategy==="version-first"||u==="version-first")&&o.options.remotes.forEach(O=>{O.shareScope===e&&c.push(I(O.name))}),c}loadShareSync(e,r){const{host:o}=this,n=Pt({pkgName:e,extraOptions:r,shareInfos:o.options.shared});n?.scope&&n.scope.forEach(c=>{this.initializeSharing(c,{strategy:n.strategy})});const u=ce(this.shareScopeMap,e,n,this.hooks.lifecycle.resolveShare),l=c=>{c.useIn||(c.useIn=[]),N(c.useIn,o.options.name)};if(u){if(typeof u.lib=="function")return l(u),u.loaded||(u.loaded=!0,u.from===o.options.name&&(n.loaded=!0)),u.lib;if(typeof u.get=="function"){const c=u.get();if(!(c instanceof s.proxy.Promise))return l(u),this.setShared({pkgName:e,loaded:!0,from:o.options.name,lib:c,shared:u}),c}}if(n.lib)return n.loaded||(n.loaded=!0),n.lib;if(n.get){const c=n.get();if(c instanceof s.proxy.Promise){const p=r?.from==="build"?f.RUNTIME_005:f.RUNTIME_006;throw new s.proxy.Error(f.getShortErrorMsg(p,f.runtimeDescMap,{hostName:o.options.name,sharedPkgName:e}))}return n.lib=c,this.setShared({pkgName:e,loaded:!0,from:o.options.name,lib:n.lib,shared:n}),n.lib}throw new s.proxy.Error(f.getShortErrorMsg(f.RUNTIME_006,f.runtimeDescMap,{hostName:o.options.name,sharedPkgName:e}))}initShareScopeMap(e,r,o={}){const{host:n}=this;this.shareScopeMap[e]=r,this.hooks.lifecycle.initContainerShareScopeMap.emit({shareScope:r,options:n.options,origin:n,scopeName:e,hostShareScopeMap:o.hostShareScopeMap})}setShared({pkgName:e,shared:r,from:o,lib:n,loading:u,loaded:l,get:c}){const{version:p,scope:h="default"}=r,b=a._object_without_properties_loose(r,["version","scope"]);(s.proxy.Array.isArray(h)?h:[h]).forEach(m=>{if(this.shareScopeMap[m]||(this.shareScopeMap[m]={}),this.shareScopeMap[m][e]||(this.shareScopeMap[m][e]={}),!this.shareScopeMap[m][e][p]){this.shareScopeMap[m][e][p]=a._extends({version:p,scope:["default"]},b,{lib:n,loaded:l,loading:u}),c&&(this.shareScopeMap[m][e][p].get=c);return}const I=this.shareScopeMap[m][e][p];u&&!I.loading&&(I.loading=u)})}_setGlobalShareScopeMap(e){const r=We(),o=e.id||e.name;o&&!r[o]&&(r[o]=this.shareScopeMap)}constructor(e){this.hooks=new _e({afterResolve:new ue("afterResolve"),beforeLoadShare:new ue("beforeLoadShare"),loadShare:new Q,resolveShare:new $e("resolveShare"),initContainerShareScopeMap:new $e("initContainerShareScopeMap")}),this.host=e,this.shareScopeMap={},this.initTokens={},this._setGlobalShareScopeMap(e.options)}}class go{formatAndRegisterRemote(e,r){return(r.remotes||[]).reduce((n,u)=>(this.registerRemote(u,n,{force:!1}),n),e.remotes)}setIdToRemoteMap(e,r){const{remote:o,expose:n}=r,{name:u,alias:l}=o;if(this.idToRemoteMap[e]={name:o.name,expose:n},l&&e.startsWith(u)){const c=e.replace(u,l);this.idToRemoteMap[c]={name:o.name,expose:n};return}if(l&&e.startsWith(l)){const c=e.replace(l,u);this.idToRemoteMap[c]={name:o.name,expose:n}}}async loadRemote(e,r){const{host:o}=this;try{const{loadFactory:n=!0}=r||{loadFactory:!0},{module:u,moduleOptions:l,remoteMatchInfo:c}=await this.getRemoteModuleAndOptions({id:e}),{pkgNameOrAlias:p,remote:h,expose:b,id:E,remoteSnapshot:m}=c,I=await u.get(E,b,r,m),O=await this.hooks.lifecycle.onLoad.emit({id:E,pkgNameOrAlias:p,expose:b,exposeModule:n?I:s.proxy.undefined,exposeModuleFactory:n?s.proxy.undefined:I,remote:h,options:l,moduleInstance:u,origin:o});return this.setIdToRemoteMap(e,c),typeof O=="function"?O:I}catch(n){const{from:u="runtime"}=r||{from:"runtime"},l=await this.hooks.lifecycle.errorLoadRemote.emit({id:e,error:n,from:u,lifecycle:"onLoad",origin:o});if(!l)throw n;return l}}async preloadRemote(e){const{host:r}=this;await this.hooks.lifecycle.beforePreloadRemote.emit({preloadOps:e,options:r.options,origin:r});const o=uo(r.options.remotes,e);await s.proxy.Promise.all(o.map(async n=>{const{remote:u}=n,l=De(u),{globalSnapshot:c,remoteSnapshot:p}=await r.snapshotHandler.loadRemoteSnapshotInfo(u),h=await this.hooks.lifecycle.generatePreloadAssets.emit({origin:r,preloadOptions:n,remote:u,remoteInfo:l,globalSnapshot:c,remoteSnapshot:p});h&&Ft(l,r,h)}))}registerRemotes(e,r){const{host:o}=this;e.forEach(n=>{this.registerRemote(n,o.options.remotes,{force:r?.force})})}async getRemoteModuleAndOptions(e){const{host:r}=this,{id:o}=e;let n;try{n=await this.hooks.lifecycle.beforeRequest.emit({id:o,options:r.options,origin:r})}catch(O){if(n=await this.hooks.lifecycle.errorLoadRemote.emit({id:o,options:r.options,origin:r,from:"runtime",error:O,lifecycle:"beforeRequest"}),!n)throw O}const{id:u}=n,l=Mt(r.options.remotes,u);g(l,f.getShortErrorMsg(f.RUNTIME_004,f.runtimeDescMap,{hostName:r.options.name,requestId:u}));const{remote:c}=l,p=De(c),h=await r.sharedHandler.hooks.lifecycle.afterResolve.emit(a._extends({id:u},l,{options:r.options,origin:r,remoteInfo:p})),{remote:b,expose:E}=h;g(b&&E,`The 'beforeRequest' hook was executed, but it failed to return the correct 'remote' and 'expose' values while loading ${u}.`);let m=r.moduleCache.get(b.name);const I={host:r,remoteInfo:p};return m||(m=new qe(I),r.moduleCache.set(b.name,m)),{module:m,moduleOptions:I,remoteMatchInfo:h}}registerRemote(e,r,o){const{host:n}=this,u=()=>{if(e.alias){const c=r.find(p=>{var h;return e.alias&&(p.name.startsWith(e.alias)||((h=p.alias)==null?void 0:h.startsWith(e.alias)))});g(!c,`The alias ${e.alias} of remote ${e.name} is not allowed to be the prefix of ${c&&c.name} name or alias`)}"entry"in e&&d.isBrowserEnv()&&!e.entry.startsWith("http")&&(e.entry=new s.proxy.URL(e.entry,s.proxy.location.origin).href),e.shareScope||(e.shareScope=Se),e.type||(e.type=bt)};this.hooks.lifecycle.beforeRegisterRemote.emit({remote:e,origin:n});const l=r.find(c=>c.name===e.name);if(!l)u(),r.push(e),this.hooks.lifecycle.registerRemote.emit({remote:e,origin:n});else{const c=[`The remote "${e.name}" is already registered.`,"Please note that overriding it may cause unexpected errors."];o?.force&&(this.removeRemote(l),u(),r.push(e),this.hooks.lifecycle.registerRemote.emit({remote:e,origin:n}),d.warn(c.join(" ")))}}removeRemote(e){try{const{host:o}=this,{name:n}=e,u=o.options.remotes.findIndex(c=>c.name===n);u!==-1&&o.options.remotes.splice(u,1);const l=o.moduleCache.get(e.name);if(l){const c=l.remoteInfo,p=c.entryGlobalName;if(x[p]){var r;(r=s.proxy.Object.getOwnPropertyDescriptor(x,p))!=null&&r.configurable?delete x[p]:x[p]=s.proxy.undefined}const h=Ke(l.remoteInfo);ae[h]&&delete ae[h],o.snapshotHandler.manifestCache.delete(c.entry);let b=c.buildVersion?d.composeKeyWithSeparator(c.name,c.buildVersion):c.name;const E=x.__FEDERATION__.__INSTANCES__.findIndex(I=>c.buildVersion?I.options.id===b:I.name===b);if(E!==-1){const I=x.__FEDERATION__.__INSTANCES__[E];b=I.options.id||b;const O=We();let M=!0;const $=[];s.proxy.Object.keys(O).forEach(A=>{const k=O[A];k&&s.proxy.Object.keys(k).forEach(L=>{const D=k[L];D&&s.proxy.Object.keys(D).forEach(K=>{const q=D[K];q&&s.proxy.Object.keys(q).forEach(se=>{const B=q[se];B&&typeof B=="object"&&B.from===c.name&&(B.loaded||B.loading?(B.useIn=B.useIn.filter(ee=>ee!==c.name),B.useIn.length?M=!1:$.push([A,L,K,se])):$.push([A,L,K,se]))})})})}),M&&(I.shareScopeMap={},delete O[b]),$.forEach(([A,k,L,D])=>{var K,q,se;(se=O[A])==null||(q=se[k])==null||(K=q[L])==null||delete K[D]}),x.__FEDERATION__.__INSTANCES__.splice(E,1)}const{hostGlobalSnapshot:m}=Ht(e,o);if(m){const I=m&&"remotesInfo"in m&&m.remotesInfo&&le(m.remotesInfo,e.name).key;I&&(delete m.remotesInfo[I],s.proxy.Boolean(W.__FEDERATION__.__MANIFEST_LOADING__[I])&&delete W.__FEDERATION__.__MANIFEST_LOADING__[I])}o.moduleCache.delete(e.name)}}catch(o){R.log("removeRemote fail: ",o)}}constructor(e){this.hooks=new _e({beforeRegisterRemote:new $e("beforeRegisterRemote"),registerRemote:new $e("registerRemote"),beforeRequest:new ue("beforeRequest"),onLoad:new Q("onLoad"),handlePreloadModule:new J("handlePreloadModule"),errorLoadRemote:new Q("errorLoadRemote"),beforePreloadRemote:new Q("beforePreloadRemote"),generatePreloadAssets:new Q("generatePreloadAssets"),afterPreloadRemote:new Q,loadEntry:new Q}),this.host=e,this.idToRemoteMap={}}}class bo{initOptions(e){this.registerPlugins(e.plugins);const r=this.formatOptions(this.options,e);return this.options=r,r}async loadShare(e,r){return this.sharedHandler.loadShare(e,r)}loadShareSync(e,r){return this.sharedHandler.loadShareSync(e,r)}initializeSharing(e=Se,r){return this.sharedHandler.initializeSharing(e,r)}initRawContainer(e,r,o){const n=De({name:e,entry:r}),u=new qe({host:this,remoteInfo:n});return u.remoteEntryExports=o,this.moduleCache.set(e,u),u}async loadRemote(e,r){return this.remoteHandler.loadRemote(e,r)}async preloadRemote(e){return this.remoteHandler.preloadRemote(e)}initShareScopeMap(e,r,o={}){this.sharedHandler.initShareScopeMap(e,r,o)}formatOptions(e,r){const{shared:o}=At(e,r),{userOptions:n,options:u}=this.hooks.lifecycle.beforeInit.emit({origin:this,userOptions:r,options:e,shareInfo:o}),l=this.remoteHandler.formatAndRegisterRemote(u,n),{shared:c}=this.sharedHandler.registerShared(u,n),p=[...u.plugins];n.plugins&&n.plugins.forEach(b=>{p.includes(b)||p.push(b)});const h=a._extends({},e,r,{plugins:p,remotes:l,shared:c});return this.hooks.lifecycle.init.emit({origin:this,options:h}),h}registerPlugins(e){const r=no(e,[this.hooks,this.remoteHandler.hooks,this.sharedHandler.hooks,this.snapshotHandler.hooks,this.loaderHook,this.bridgeHook]);this.options.plugins=this.options.plugins.reduce((o,n)=>(n&&o&&!o.find(u=>u.name===n.name)&&o.push(n),o),r||[])}registerRemotes(e,r){return this.remoteHandler.registerRemotes(e,r)}constructor(e){this.hooks=new _e({beforeInit:new $e("beforeInit"),init:new J,beforeInitContainer:new ue("beforeInitContainer"),initContainer:new ue("initContainer")}),this.version="0.6.20",this.moduleCache=new s.proxy.Map,this.loaderHook=new _e({getModuleInfo:new J,createScript:new J,createLink:new J,fetch:new Q,loadEntryError:new Q,getModuleFactory:new Q}),this.bridgeHook=new _e({beforeBridgeRender:new J,afterBridgeRender:new J,beforeBridgeDestroy:new J,afterBridgeDestroy:new J});const r={id:ro(),name:e.name,plugins:[po(),_o()],remotes:[],shared:{},inBrowser:d.isBrowserEnv()};this.name=e.name,this.options=r,this.snapshotHandler=new mo(this),this.sharedHandler=new Eo(this),this.remoteHandler=new go(this),this.shareScopeMap=this.sharedHandler.shareScopeMap,this.registerPlugins([...r.plugins,...e.plugins||[]]),this.options=this.formatOptions(r,e)}}var So=s.proxy.Object.freeze({__proto__:null});s.proxy.Object.defineProperty(i,"loadScript",{enumerable:!0,get:function(){return d.loadScript}}),s.proxy.Object.defineProperty(i,"loadScriptNode",{enumerable:!0,get:function(){return d.loadScriptNode}}),i.CurrentGlobal=x,i.FederationHost=bo,i.Global=W,i.Module=qe,i.addGlobalSnapshot=Ce,i.assert=g,i.getGlobalFederationConstructor=pt,i.getGlobalSnapshot=Ae,i.getInfoWithoutType=le,i.getRegisteredShare=ce,i.getRemoteEntry=Ie,i.getRemoteInfo=De,i.helpers=to,i.isStaticResourcesEqual=X,i.matchRemoteWithNameAndExpose=Mt,i.registerGlobalPlugins=_t,i.resetFederationGlobalInfo=ft,i.safeWrapper=U,i.satisfy=ve,i.setGlobalFederationConstructor=ht,i.setGlobalFederationInstance=dt,i.types=So})(rt);var Sr={},On=rt;function Vt(){return typeof s.proxy.FEDERATION_BUILD_IDENTIFIER<"u"?s.proxy.FEDERATION_BUILD_IDENTIFIER:""}function Tn(i,a){const d=Vt();return On.CurrentGlobal.__FEDERATION__.__INSTANCES__.find(f=>!!(d&&f.options.id===Vt()||f.options.name===i&&!f.options.version&&!a||f.options.name===i&&a&&f.options.version===a))}Sr.getGlobalFederationInstance=Tn;(function(i){var a=rt,d=Sr;let f=null;function _(T){const U=d.getGlobalFederationInstance(T.name,T.version);if(U)return U.initOptions(T),f||(f=U),U;{const z=a.getGlobalFederationConstructor()||a.FederationHost;return f=new z(T),a.setGlobalFederationInstance(f),f}}function R(...T){return a.assert(f,"Please call init first"),f.loadRemote.apply(f,T)}function g(...T){return a.assert(f,"Please call init first"),f.loadShare.apply(f,T)}function y(...T){return a.assert(f,"Please call init first"),f.loadShareSync.apply(f,T)}function S(...T){return a.assert(f,"Please call init first"),f.preloadRemote.apply(f,T)}function N(...T){return a.assert(f,"Please call init first"),f.registerRemotes.apply(f,T)}function P(...T){return a.assert(f,"Please call init first"),f.registerPlugins.apply(f,T)}function w(){return f}a.setGlobalFederationConstructor(a.FederationHost),s.proxy.Object.defineProperty(i,"FederationHost",{enumerable:!0,get:function(){return a.FederationHost}}),s.proxy.Object.defineProperty(i,"Module",{enumerable:!0,get:function(){return a.Module}}),s.proxy.Object.defineProperty(i,"getRemoteEntry",{enumerable:!0,get:function(){return a.getRemoteEntry}}),s.proxy.Object.defineProperty(i,"getRemoteInfo",{enumerable:!0,get:function(){return a.getRemoteInfo}}),s.proxy.Object.defineProperty(i,"loadScript",{enumerable:!0,get:function(){return a.loadScript}}),s.proxy.Object.defineProperty(i,"loadScriptNode",{enumerable:!0,get:function(){return a.loadScriptNode}}),s.proxy.Object.defineProperty(i,"registerGlobalPlugins",{enumerable:!0,get:function(){return a.registerGlobalPlugins}}),i.getInstance=w,i.init=_,i.loadRemote=R,i.loadShare=g,i.loadShareSync=y,i.preloadRemote=S,i.registerPlugins=P,i.registerRemotes=N})(Ro);let Rr,vr;const wn=new s.proxy.Promise((i,a)=>{Rr=i,vr=a});var Cn={initPromise:wn,initResolve:Rr,initReject:vr};export{Ro as i,Cn as v};
